{"ast":null,"code":"import _slicedToArray from\"C:/Users/Lucifer/The Cakesmith/fyp-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import SearchScreen from'./SearchScreen';import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,Route,useParams}from'react-router-dom';import{listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Product from'../components/Product';import Footer from'../Pages/Footer';import Header from'../Pages/Header';import Rating from'../components/Rating';import{prices,ratings}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchBox(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),names=_useState2[0],setName=_useState2[1];var submitHandler=function submitHandler(e){e.preventDefault();props.history.push(\"/search/name/\".concat(names));};var _useParams=useParams(),_useParams$name=_useParams.name,name=_useParams$name===void 0?'all':_useParams$name,_useParams$category=_useParams.category,category=_useParams$category===void 0?'all':_useParams$category,_useParams$min=_useParams.min,min=_useParams$min===void 0?0:_useParams$min,_useParams$max=_useParams.max,max=_useParams$max===void 0?0:_useParams$max,_useParams$rating=_useParams.rating,rating=_useParams$rating===void 0?0:_useParams$rating,_useParams$order=_useParams.order,order=_useParams$order===void 0?'newest':_useParams$order;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productCategoryList=useSelector(function(state){return state.productCategoryList;});var loadingCategories=productCategoryList.loading,errorCategories=productCategoryList.error,categories=productCategoryList.categories;useEffect(function(){dispatch(listProducts({name:name!=='all'?name:'',category:category!=='all'?category:'',min:min,max:max,rating:rating,order:order}));},[category,dispatch,max,min,name,order,rating]);var getFilterUrl=function getFilterUrl(filter){var filterCategory=filter.category||category;var filterName=filter.name||name;var filterRating=filter.rating||rating;var sortOrder=filter.order||order;var filterMin=filter.min?filter.min:filter.min===0?0:min;var filterMax=filter.max?filter.max:filter.max===0?0:max;return\"/search/category/\".concat(filterCategory,\"/name/\").concat(filterName,\"/min/\").concat(filterMin,\"/max/\").concat(filterMax,\"/rating/\").concat(filterRating,\"/order/\").concat(sortOrder);};return/*#__PURE__*/_jsx(\"form\",{className:\"search\",onSubmit:submitHandler,children:/*#__PURE__*/_jsxs(\"div\",{className:\" ProdListViewSearch\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"SearchBarA\",children:/*#__PURE__*/_jsxs(\"div\",{children:[loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{id:\"SearchResults\",children:[products.length,\" Results\"]}),/*#__PURE__*/_jsxs(\"div\",{id:\"hhhh\",children:[\" Sort by: \\xA0\",/*#__PURE__*/_jsxs(\"select\",{className:\"minimal\",value:order,onChange:function onChange(e){props.history.push(getFilterUrl({order:e.target.value}));},children:[\" \",/*#__PURE__*/_jsx(\"option\",{value:\"\",selected:true,disabled:true,children:\"Choose here\"}),/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest Arrivals\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lowest\",children:\"Price: Low to High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"highest\",children:\"Price: High to Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"toprated\",children:\"Reviews\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"SearchBarB\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"ProdListViewSearchButton\",type:\"submit\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-search\"})}),/*#__PURE__*/_jsx(\"input\",{style:{fontSize:\"16px\"},type:\"text\",name:\"q\",id:\"ProdListViewSearchInput\",placeholder:\"Search\",onChange:function onChange(e){return setName(e.target.value);}})]})]})});}","map":{"version":3,"sources":["C:/Users/Lucifer/The Cakesmith/fyp-frontend/src/components/SearchBox.js"],"names":["React","useState","SearchScreen","useEffect","useDispatch","useSelector","Link","Route","useParams","listProducts","LoadingBox","MessageBox","Product","Footer","Header","Rating","prices","ratings","SearchBox","props","names","setName","submitHandler","e","preventDefault","history","push","name","category","min","max","rating","order","dispatch","productList","state","loading","error","products","productCategoryList","loadingCategories","errorCategories","categories","getFilterUrl","filter","filterCategory","filterName","filterRating","sortOrder","filterMin","filterMax","length","target","value","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport SearchScreen from './SearchScreen';\r\nimport  {useEffect}  from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, Route, useParams } from 'react-router-dom';\r\nimport { listProducts } from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport Product from '../components/Product';\r\nimport Footer from '../Pages/Footer';\r\nimport Header from '../Pages/Header';\r\nimport Rating from '../components/Rating';\r\nimport { prices, ratings } from '../utils';\r\n\r\nexport default function SearchBox(props) {\r\n  const [names, setName] = useState('');\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    props.history.push(`/search/name/${names}`);\r\n  };\r\n\r\n\r\n\r\n\r\n  const {\r\n    name = 'all',\r\n    category = 'all',\r\n    min = 0,\r\n    max = 0,\r\n    rating = 0,\r\n    order = 'newest',\r\n  } = useParams();\r\n\r\n  const dispatch = useDispatch();\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, error, products } = productList;\r\n  const productCategoryList = useSelector((state) => state.productCategoryList);\r\n  const {\r\n    loading: loadingCategories,\r\n    error: errorCategories,\r\n    categories,\r\n  } = productCategoryList;\r\n  useEffect(() => {\r\n    dispatch(\r\n      listProducts({\r\n        name: name !== 'all' ? name : '',\r\n        category: category !== 'all' ? category : '',\r\n        min,\r\n        max,\r\n        rating,\r\n        order,\r\n      })\r\n    );\r\n  }, [category, dispatch, max, min, name, order, rating]);\r\n\r\n  const getFilterUrl = (filter) => {\r\n    const filterCategory = filter.category || category;\r\n    const filterName = filter.name || name;\r\n    const filterRating = filter.rating || rating;\r\n    const sortOrder = filter.order || order;\r\n    const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\r\n    const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\r\n    return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}`;\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n\r\n\r\n   \r\n\r\n\r\n    <form className=\"search\" onSubmit={submitHandler}>\r\n\r\n\r\n      <div className=\" ProdListViewSearch\">\r\n\r\n        <div className=\"SearchBarA\">\r\n\r\n\r\n          <div>\r\n            {loading ? (\r\n              <LoadingBox></LoadingBox>\r\n            ) : error ? (\r\n              <MessageBox variant=\"danger\">{error}</MessageBox>\r\n            ) : (\r\n              <div id=\"SearchResults\">{products.length} Results</div>\r\n            )}\r\n            <div id=\"hhhh\"> Sort by: &nbsp;\r\n              <select className=\"minimal\"\r\n                value={order}\r\n                onChange={(e) => {\r\n                  props.history.push(getFilterUrl({ order: e.target.value }));\r\n                }}\r\n              > <option value=\"\" selected disabled>Choose here</option>\r\n                <option value=\"newest\">Newest Arrivals</option>\r\n                <option value=\"lowest\">Price: Low to High</option>\r\n                <option value=\"highest\">Price: High to Low</option>\r\n                <option value=\"toprated\">Reviews</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n\r\n        </div>\r\n\r\n        <div className=\"SearchBarB\">\r\n          <button id=\"ProdListViewSearchButton\" type=\"submit\">\r\n            <i className=\"fa fa-search\"></i>\r\n          </button>\r\n          <input style={{fontSize:\"16px\"}} type=\"text\" name=\"q\" id=\"ProdListViewSearchInput\" placeholder=\"Search\" onChange={(e) => setName(e.target.value)}></input>\r\n        </div>\r\n\r\n      </div>\r\n    </form>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}