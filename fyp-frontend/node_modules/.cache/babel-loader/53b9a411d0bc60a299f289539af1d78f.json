{"ast":null,"code":"import React,{useEffect}from'react';import Axios from'axios';import Product from'../components/Product';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{useDispatch,useSelector}from'react-redux';import{listProducts}from'../actions/productActions';import Footer from'../Pages/Footer';import Header from'../Pages/Header';import{Link,Route}from'react-router-dom';import'./components.css';import SearchBox from'./SearchBox';import'./ProductScreen.css';import{useParams}from'react-router-dom';import Rating from'../components/Rating';import{prices,ratings}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductScreen(){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;useEffect(function(){dispatch(listProducts());},[dispatch]);var _useParams=useParams(),_useParams$name=_useParams.name,name=_useParams$name===void 0?'all':_useParams$name,_useParams$category=_useParams.category,category=_useParams$category===void 0?'all':_useParams$category,_useParams$min=_useParams.min,min=_useParams$min===void 0?0:_useParams$min,_useParams$max=_useParams.max,max=_useParams$max===void 0?0:_useParams$max,_useParams$rating=_useParams.rating,rating=_useParams$rating===void 0?0:_useParams$rating,_useParams$order=_useParams.order,order=_useParams$order===void 0?'newest':_useParams$order;var productCategoryList=useSelector(function(state){return state.productCategoryList;});var loadingCategories=productCategoryList.loading,errorCategories=productCategoryList.error,categories=productCategoryList.categories;useEffect(function(){dispatch(listProducts({name:name!=='all'?name:'',category:category!=='all'?category:'',min:min,max:max,rating:rating,order:order}));},[category,dispatch,max,min,name,order,rating]);var getFilterUrl=function getFilterUrl(filter){var filterCategory=filter.category||category;var filterName=filter.name||name;var filterRating=filter.rating||rating;var sortOrder=filter.order||order;var filterMin=filter.min?filter.min:filter.min===0?0:min;var filterMax=filter.max?filter.max:filter.max===0?0:max;return\"/search/category/\".concat(filterCategory,\"/name/\").concat(filterName,\"/min/\").concat(filterMin,\"/max/\").concat(filterMax,\"/rating/\").concat(filterRating,\"/order/\").concat(sortOrder);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Route,{render:function render(_ref){var history=_ref.history;return/*#__PURE__*/_jsx(SearchBox,{history:history});}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"SearchScreen\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Department\"}),loadingCategories?/*#__PURE__*/_jsx(LoadingBox,{}):errorCategories?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCategories}):/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:'all'===category?'active':'',to:getFilterUrl({category:'all'}),children:\"Any\"})}),categories.map(function(c){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:c===category?'active':'',to:getFilterUrl({category:c}),children:c})},c);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"SearchScreen\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"ul\",{children:prices.map(function(p){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:getFilterUrl({min:p.min,max:p.max}),className:\"\".concat(p.min,\"-\").concat(p.max)===\"\".concat(min,\"-\").concat(max)?'active':'',children:p.name})},p.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"SearchScreen\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Reviews\"}),/*#__PURE__*/_jsx(\"ul\",{children:ratings.map(function(r){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:getFilterUrl({rating:r.rating}),className:\"\".concat(r.rating)===\"\".concat(rating)?'active':'',children:/*#__PURE__*/_jsx(Rating,{caption:' & up',rating:r.rating})})},r.name);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[products.length===0&&/*#__PURE__*/_jsx(MessageBox,{children:\"No Product Found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row center ProdListView\",style:{marginTop:\"5%\",marginBottom:\"5%\"},children:products.map(function(product){return/*#__PURE__*/_jsx(Product,{product:product},product._id);})})]})})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"sources":["C:/Users/Lucifer/The Cakesmith/fyp-frontend/src/components/ProductScreen.js"],"names":["React","useEffect","Axios","Product","LoadingBox","MessageBox","useDispatch","useSelector","listProducts","Footer","Header","Link","Route","SearchBox","useParams","Rating","prices","ratings","ProductScreen","cart","state","cartItems","dispatch","productList","loading","error","products","name","category","min","max","rating","order","productCategoryList","loadingCategories","errorCategories","categories","getFilterUrl","filter","filterCategory","filterName","filterRating","sortOrder","filterMin","filterMax","history","map","c","p","r","length","marginTop","marginBottom","product","_id"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport Axios from 'axios';\r\nimport Product from '../components/Product';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { listProducts } from '../actions/productActions';\r\nimport Footer from '../Pages/Footer';\r\nimport Header from '../Pages/Header';\r\nimport { Link, Route } from 'react-router-dom';\r\nimport './components.css';\r\nimport SearchBox from './SearchBox';\r\nimport './ProductScreen.css';\r\nimport { useParams } from 'react-router-dom';\r\nimport Rating from '../components/Rating';\r\nimport { prices, ratings } from '../utils';\r\n\r\n\r\n\r\nexport default function ProductScreen() {\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n  const dispatch = useDispatch();\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, error, products } = productList;\r\n\r\n  useEffect(() => {\r\n    dispatch(listProducts());\r\n  }, [dispatch]);\r\n\r\n  \r\n\r\n\r\n  const {\r\n    name = 'all',\r\n    category = 'all',\r\n    min = 0,\r\n    max = 0,\r\n    rating = 0,\r\n    order = 'newest',\r\n  } = useParams();\r\n\r\n  const productCategoryList = useSelector((state) => state.productCategoryList);\r\n  const {\r\n    loading: loadingCategories,\r\n    error: errorCategories,\r\n    categories,\r\n  } = productCategoryList;\r\n  useEffect(() => {\r\n    dispatch(\r\n      listProducts({\r\n        name: name !== 'all' ? name : '',\r\n        category: category !== 'all' ? category : '',\r\n        min,\r\n        max,\r\n        rating,\r\n        order,\r\n      })\r\n    );\r\n  }, [category, dispatch, max, min, name, order, rating]);\r\n\r\n  const getFilterUrl = (filter) => {\r\n    const filterCategory = filter.category || category;\r\n    const filterName = filter.name || name;\r\n    const filterRating = filter.rating || rating;\r\n    const sortOrder = filter.order || order;\r\n    const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\r\n    const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\r\n    return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}`;\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n\r\n   \r\n    \r\n    <Header/>\r\n      \r\n    <div>\r\n        <Route\r\n          render={({ history }) => (\r\n            <SearchBox history={history}></SearchBox>\r\n          )}\r\n        ></Route>\r\n      </div>\r\n\r\n      \r\n\r\n\r\n      \r\n      <div >\r\n        <div className=\"col-1\">\r\n          \r\n\r\n          <div className=\"SearchScreen\">\r\n          <h3>Department</h3>\r\n            {loadingCategories ? (\r\n              <LoadingBox></LoadingBox>\r\n            ) : errorCategories ? (\r\n              <MessageBox variant=\"danger\">{errorCategories}</MessageBox>\r\n            ) : (\r\n              <ul>\r\n                <li>\r\n                  <Link\r\n                    className={'all' === category ? 'active' : ''}\r\n                    to={getFilterUrl({ category: 'all' })}\r\n                  >\r\n                    Any\r\n                  </Link>\r\n                </li>\r\n                {categories.map((c) => (\r\n                  <li key={c}>\r\n                    <Link\r\n                      className={c === category ? 'active' : ''}\r\n                      to={getFilterUrl({ category: c })}\r\n                    >\r\n                      {c}\r\n                    </Link>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n\r\n\r\n          <div className=\"SearchScreen\">\r\n            <h3>Price</h3>\r\n            <ul>\r\n              {prices.map((p) => (\r\n                <li key={p.name}>\r\n                  <Link\r\n                    to={getFilterUrl({ min: p.min, max: p.max })}\r\n                    className={\r\n                      `${p.min}-${p.max}` === `${min}-${max}` ? 'active' : ''\r\n                    }\r\n                  >\r\n                    {p.name}\r\n                  </Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n\r\n          \r\n          <div className=\"SearchScreen\">\r\n            <h3>Reviews</h3>\r\n            <ul>\r\n              {ratings.map((r) => (\r\n                <li key={r.name}>\r\n                  <Link\r\n                    to={getFilterUrl({ rating: r.rating })}\r\n                    className={`${r.rating}` === `${rating}` ? 'active' : ''}\r\n                  >\r\n                    <Rating caption={' & up'} rating={r.rating}></Rating>\r\n                  </Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        <div className=\"col-3\">\r\n          {loading ? (\r\n            <LoadingBox></LoadingBox>\r\n          ) : error ? (\r\n            <MessageBox variant=\"danger\">{error}</MessageBox>\r\n          ) : (\r\n            <>\r\n              {products.length === 0 && (\r\n                <MessageBox>No Product Found</MessageBox>\r\n              )}\r\n              <div className=\"row center ProdListView\" style={{marginTop:\"5%\", marginBottom:\"5%\"}}>\r\n                {products.map((product) => (\r\n                  <Product key={product._id} product={product}></Product>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n\r\n      <Footer/>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}